<div id="body" xmlns="http://www.w3.org/1999/html">
  <mat-toolbar color="primary">
    <div>
      <button mat-icon-button (click)="sidenav.toggle()">
        <mat-icon>menu</mat-icon>
      </button>
    </div>

    <span class="title">Welcome, {{user.name}}</span>
    <span class="example-spacer"></span>

  </mat-toolbar>
  <mat-sidenav-container class="example-container">

    <mat-sidenav  #sidenav  mode="over"  opened="false" >
      <div>
        <a mat-button (click)="setProfile()">Profile</a>
        <a mat-button (click)="setManageLocations()">Manage locations</a>
        <a mat-button (click)="setManageRooms()">Manage rooms</a>
        <a mat-button (click)="setManageController()">Manage controllers</a>
        <a mat-button (click)="setSecurity()">Security</a>
        <a mat-button class="bottom" (click)="logOut()">Logout</a>
      </div>
    </mat-sidenav>
    <mat-sidenav-content >
      <!--ngIf for each section -->
      <div class="profile" *ngIf="isProfile()">
        <h1>Profile</h1>
        <table class="data" cellspacing="0">
          <tr><td class="left">Name:</td><td class="right">{{user.name}}</td> </tr>

          <tr><td class="left">Surname:</td><td class="right">{{user.surname}}</td> </tr>

          <tr><td class="left">Email:</td><td class="right">{{user.email}}</td> </tr>

          <tr><td class="left">Phone number:</td><td class="right">{{user.phoneNumber}}</td> </tr>
        </table>
      </div>
      <div class="security" *ngIf="isSecurity()">
        <!-- divided into 2 sections: password and sessios-->
        <div class="password">
        <h1>Change password</h1>
          <p class="label">Old password:</p>
          <p class="input"><input #oldPassword type="password"></p>
          <p class="label">New password:</p>
          <p class="input"><input #newPassword type="password"></p>
          <p class="label">Confirm password:</p>
          <p class="input"><input #confirmPassword type="password"></p>
        <a mat-button (click)="changePassword2(oldPassword.value,newPassword.value,confirmPassword.value)">Confirm</a>
        <br>
        </div>
        <div class="sessions">
        <h1>Sessions</h1>
        <h2>ip-location-date-time</h2>
      </div>
      </div>

      <div class="manageLocations" *ngIf="isManageLocations()">
        <mat-form-field>
          <mat-label>Filter</mat-label>
          <label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ex. home" class="filter-locations">
          </label>
        </mat-form-field>
        <table mat-table
               [dataSource]="locationDataSource" multiTemplateDataRows
               class="mat-elevation-z8">
          <ng-container matColumnDef="{{column}}" *ngFor="let column of locationColumns">
            <th mat-header-cell *matHeaderCellDef> {{column}} </th>
            <td mat-cell *matCellDef="let location"> {{location[column]}} </td>
          </ng-container>

          <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let location" [attr.colspan]="locationColumns.length">
              <div class="location-detail"
                   [@detailExpand]="location == expandedLocation ? 'expanded' : 'collapsed'">
                <button mat-fab color="warn" aria-label="Delete location">
                  <mat-icon>delete</mat-icon>
                </button>
                <button mat-fab color="basic" aria-label="Update location">
                  <mat-icon>create</mat-icon>
                </button>
<!--                <table mat-table-->
<!--                       [dataSource]="roomDataSource" multiTemplateDataRows-->
<!--                       class="room-table">-->
<!--                  <ng-container matColumnDef="{{column}}" *ngFor="let column of roomColumns">-->
<!--                    <th mat-header-cell *matHeaderCellDef> {{column}} </th>-->
<!--                    <td mat-cell *matCellDef="let room"> {{room[column]}} </td>-->
<!--                  </ng-container>-->

<!--                  <tr mat-header-row *matHeaderRowDef="roomColumns"></tr>-->
<!--                  <tr mat-row *matRowDef="let location; columns: roomColumns;"-->
<!--                      class="room-row">-->
<!--                  </tr>-->
<!--                </table>-->
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="locationColumns"></tr>
          <tr mat-row *matRowDef="let location; columns: locationColumns;"
              class="location-row"
              [class.example-expanded-row]="locationColumns === location"
              (click)="expandedLocation = expandedLocation === location ? null : location">
          </tr>
          <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
        </table>

        <!--This is where we have to add the create functionality to the button-->
        <button mat-mini-fab class="addButton" color="basic" aria-label="Add location">
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
